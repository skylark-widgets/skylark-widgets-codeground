/**
 * skylark-widgets-coder - The skylark code editor widget for showcasing html/css/js.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-coder/
 * @license MIT
 */
!function(e,t){var n=t.define,s=t.require,i="function"==typeof n&&n.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!n){var o={};n=t.define=function(e,t,n){"function"==typeof n?(o[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),s=e.split("/");n.pop();for(var i=0;i<s.length;i++)"."!=s[i]&&(".."==s[i]?n.pop():n.push(s[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},s(e)):o[e]={factory:null,resolved:!0,exports:n}},s=t.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var n=o[e];if(!n.resolved){var i=[];n.deps.forEach(function(e){i.push(s(e))}),n.exports=n.factory.apply(t,i)||null,n.resolved=!0}return n.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,t){e("skylark-widgets-coder/util",["skylark-net-http/Xhr"],function(e){"use strict";function t(e={},t={}){var n={};return Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(s){void 0!==n[s]?n[s]=e[s]:n[s]=t[s]}),n}function n(e,t,s,i,r){s[e](t,function(e,t,s,i,r){return function(t,o){t&&i.push(t),++e<s.length?n(e,o,s,i,r):r(i,o)}}.apply(this,arguments))}function s(e,t){if(!e.className)return!1;var n=" "+e.className+" ";return t=" "+t+" ",-1!==n.indexOf(t)}var i={html:"html",css:"css",js:"javascript",less:"less",styl:"stylus",coffee:"coffeescript"};return{extend:t,fetch:function(t,n){e.get(t).then(function(e){n(null,e)},function(e){n(e)})},seq:function(e,t,s=function(){}){var i=[];if(!e.length)return s(i,t);n(0,t,e,i,s)},debounce:function(e,t){var n=null,s=null;return function(){n?s=!0:e.apply(this,arguments),clearTimeout(n),n=setTimeout(()=>{s&&e.apply(this,arguments),n=null,s=null},t)}},log:function(){console.log(arguments)},getMode:function(e="",n="",s={}){var r=t(s,i);for(let e in r){let t=e.length;if(n.slice(-t++)==="."+e)return r[e]}for(let t in r)if(e===t)return r[t];return e},data:function(e,t){return e.getAttribute("data-"+t)},hasClass:s,addClass:function(e,t){if(s(e,t))return e.className;e.className&&(t=" "+t);return e.className+=t,e.className},removeClass:function(e,t){var n=" "+t,s=t+" ";-1!==e.className.indexOf(n)?e.className=e.className.replace(n,""):-1!==e.className.indexOf(s)?e.className=e.className.replace(s,""):e.className=e.className.replace(t,"");return e.className}}}),e("skylark-widgets-coder/template",[],function(){"use strict";return{container:function(){return'\n    <ul class="coder-nav">\n      <li class="coder-nav-item coder-nav-item-result">\n        <a href="#" data-coder-type="result">\n          Result\n        </a>\n      </li>\n      <li class="coder-nav-item coder-nav-item-html">\n        <a href="#" data-coder-type="html">\n          HTML\n        </a>\n      </li>\n      <li class="coder-nav-item coder-nav-item-css">\n        <a href="#" data-coder-type="css">\n          CSS\n        </a>\n      </li>\n      <li class="coder-nav-item coder-nav-item-js">\n        <a href="#" data-coder-type="js">\n          JavaScript\n        </a>\n      </li>\n    </ul>\n    <div class="coder-pane coder-pane-result"><iframe></iframe></div>\n    <div class="coder-pane coder-pane-html"></div>\n    <div class="coder-pane coder-pane-css"></div>\n    <div class="coder-pane coder-pane-js"></div>\n  '},paneActiveClass:function(e){return`coder-pane-active-${e}`},containerClass:function(){return"coder"},hasFileClass:function(e){return`coder-has-${e}`},editorClass:function(e){return`coder-editor coder-editor-${e}`},editorContent:function(e,t=""){return`\n    <textarea data-coder-type="${e}" data-coder-file="${t}"></textarea>\n    <div class="coder-status"></div>\n  `},statusMessage:function(e){return`\n    <p>${e}</p>\n  `},statusClass:function(e){return`coder-status-${e}`},statusActiveClass:function(e){return`coder-status-active-${e}`},pluginClass:function(e){return`coder-plugin-${e}`},statusLoading:function(e){return`Loading <strong>${e}</strong>..`},statusFetchError:function(e){return`There was an error loading <strong>${e}</strong>.`}}}),e("skylark-widgets-coder/plugin",["./util","./template"],function(e,t){"use strict";var n=[];return{register:function(e,t){t._id=e,n.push(t)},init:function(){this._get("options").plugins.forEach(s=>{let i,r,o={};"string"==typeof s?r=s:"object"==typeof s&&(r=s.name,o=s.options||{}),i=function(e){for(let t in n){let s=n[t];if(s._id===e)return s}throw new Error(`Plugin ${e} is not registered.`)}(r),this._get("plugins")[s]=new i(this,o),e.addClass(this._get("$container"),t.pluginClass(r))})}}}),e("skylark-widgets-coder/pubsoup",["./util"],function(e){"use strict";return class{constructor(){this.topics={},this.callbacks={}}find(e){return this.topics[e]=this.topics[e]||[],this.topics[e]}subscribe(e,t,n=90){var s=this.find(e);t._priority=n,s.push(t),s.sort(function(e,t){return e._priority>t._priority?1:t._priority>e._priority?-1:0})}remover(e,t){e.forEach(function(){if(t){var n=[].indexOf.call(e,t);-1!==n&&e.splice(n,1)}else e.length=0})}unsubscribe(e,t){var n=this.find(e);this.remover(n,t),this.callbacks[e]=this.callbacks[e]||[],this.remover(this.callbacks[e],t)}publish(t,n={}){var s=this.find(t),i=[];s.forEach(function(e){i.push(e)}),e.seq(i,n,this.runCallbacks(t))}runCallbacks(e){return(t,n)=>{this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].forEach(e=>{e(t,n)})}}done(e,t=function(){}){this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t)}}}),e("skylark-widgets-coder/plugins/render",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{});var s=!!("srcdoc"in document.createElement("iframe")),i=t.$container.querySelector(".coder-pane-result iframe");window.addEventListener("message",this.domready.bind(this)),t.on("change",this.change.bind(this),100),this.supportSrcdoc=s,this.content={html:"",css:"",js:""},this.frameContent="",this.$resultFrame=i,this.callbacks=[],this.index=0,this.lastCallback=(()=>{})}template(e="",t="",n=""){return`\n      <!doctype html>\n      <html>\n        <head>\n          <script>\n            (function () {\n              window.addEventListener('DOMContentLoaded', function () {\n                window.parent.postMessage(JSON.stringify({\n                  type: 'coder-dom-ready'\n                }), '*')\n              })\n            }())\n          <\/script>\n\n          <style>${e}</style>\n        </head>\n        <body>\n          ${t}\n\n          \x3c!--\n            Coder:\n            Empty script tag prevents malformed HTML from breaking the next script.\n          --\x3e\n          <script><\/script>\n          <script>${n}<\/script>\n        </body>\n      </html>\n    `}change(e,t){this.content[e.type]=e.content;var n=this.frameContent;if(this.frameContent=this.template(this.content.css,this.content.html,this.content.js),this.lastCallback=(()=>{this.lastCallback=(()=>{}),t(null,e)}),!0===e.forceRender||this.frameContent!==n)if(this.supportSrcdoc){var s=document.createElement("iframe");this.$resultFrame.parentNode.replaceChild(s,this.$resultFrame),this.$resultFrame=s,this.$resultFrame.contentWindow.document.open(),this.$resultFrame.contentWindow.document.write(this.frameContent),this.$resultFrame.contentWindow.document.close()}else{this.$resultFrame.setAttribute("data-srcdoc",this.frameContent);var i='javascript:window.frameElement.getAttribute("data-srcdoc");';this.$resultFrame.setAttribute("src",i),this.$resultFrame.contentWindow&&(this.$resultFrame.contentWindow.location=i)}else t(null,e)}domready(e){if(e.source===this.$resultFrame.contentWindow){var t={};try{t=JSON.parse(e.data)}catch(e){}"coder-dom-ready"===t.type&&this.lastCallback()}}}}),e("skylark-widgets-coder/plugins/scriptless",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{});t.on("change",this.change.bind(this)),this.runScriptTypes=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"]}change(e,t){if("html"!==e.type)return t(null,e);var n=document.createElement("div");n.innerHTML=e.content;var s=null,i=n.querySelectorAll("script");for(let e=0;e<i.length;e++)(s=i[e].getAttribute("type"))&&-1===this.runScriptTypes.indexOf(s)||i[e].parentNode.removeChild(i[e]);e.content=n.innerHTML,t(null,e)}}}),e("skylark-widgets-coder/plugins/ace",["skylark-ace","../util"],function(e,t){"use strict";return class{constructor(n,s){var i;this.editor={},this.coder=n,s=t.extend(s,{});var r=n.$container.querySelectorAll(".coder-editor");for(i=0;i<r.length;i++){let n=r[i].querySelector("textarea"),o=t.data(n,"coder-type"),a=t.data(n,"coder-file"),c=document.createElement("div");r[i].appendChild(c),this.editor[o]=e.edit(c);let l=this.editor[o],d=t.extend(s);l.getSession().setMode("ace/mode/"+t.getMode(o,a)),l.getSession().setOptions(d),l.$blockScrolling=1/0}n.on("change",this.change.bind(this),1)}editorChange(e){return()=>{this.coder.trigger("change",e)}}change(e,t){var n=this.editor[e.type];e.aceEditor||(n.getSession().setValue(e.content),e.aceEditor=n,n.on("change",this.editorChange(e))),e.content=n.getValue(),t(null,e)}}}),e("skylark-widgets-coder/plugins/codemirror",["skylark-codemirror/CodeMirror","../util"],function(e,t){"use strict";return class{constructor(n,s){var i;this.editor={},this.coder=n;var r={html:"htmlmixed"};s=t.extend(s,{lineNumbers:!0});var o=n.$container.querySelectorAll(".coder-editor");for(i=0;i<o.length;i++){let n=o[i].querySelector("textarea"),a=t.data(n,"coder-type"),c=t.data(n,"coder-file");this.editor[a]=e.fromTextArea(n,s),this.editor[a].setOption("mode",t.getMode(a,c,r))}n.on("change",this.change.bind(this),1)}editorChange(e){return()=>{this.coder.trigger("change",e)}}change(e,t){var n=this.editor[e.type];e.cmEditor||(n.setValue(e.content),e.cmEditor=n,n.on("change",this.editorChange(e))),e.content=n.getValue(),t(null,e)}}}),e("skylark-widgets-coder/plugins/less",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{}),void 0!==window.less&&(t.$container.querySelector('a[data-coder-type="css"]').innerHTML="Less",t.on("change",this.change.bind(this),20))}isLess(e){return"css"===e.type&&(-1!==e.file.indexOf(".less")||""===e.file)}change(e,t){this.isLess(e)?window.less.render(e.content,this.options,(n,s)=>{if(n)return t(n,e);e.content=s.css,t(null,e)}):t(null,e)}}}),e("skylark-widgets-coder/plugins/coffeescript",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{}),void 0!==window.CoffeeScript&&(t.$container.querySelector('a[data-coder-type="js"]').innerHTML="CoffeeScript",t.on("change",this.change.bind(this),20))}isCoffee(e){return"js"===e.type&&(-1!==e.file.indexOf(".coffee")||""===e.file)}change(e,t){if(this.isCoffee(e))try{e.content=window.CoffeeScript.compile(e.content)}catch(n){return t(n,e)}t(null,e)}}}),e("skylark-widgets-coder/plugins/stylus",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{}),void 0!==window.stylus&&(t.$container.querySelector('a[data-coder-type="css"]').innerHTML="Stylus",t.on("change",this.change.bind(this),20))}isStylus(e){return"css"===e.type&&(-1!==e.file.indexOf(".styl")||""===e.file)}change(e,t){this.isStylus(e)?window.stylus(e.content,this.options).render((n,s)=>{if(n)return t(n,e);e.content=s,t(null,e)}):t(null,e)}}}),e("skylark-widgets-coder/plugins/babel",["../util"],function(e){"use strict";return class{constructor(t,n){if(this.options=e.extend(n,{}),void 0!==window.Babel)this.babel=window.Babel;else{if(void 0===window.babel)return;this.babel={transform:window.babel}}t.$container.querySelector('a[data-coder-type="js"]').innerHTML="ES2015",t.on("change",this.change.bind(this),20)}change(e,t){if("js"===e.type){try{e.content=this.babel.transform(e.content,this.options).code}catch(n){return t(n,e)}t(null,e)}else t(null,e)}}}),e("skylark-widgets-coder/plugins/markdown",["../util"],function(e){"use strict";return class{constructor(t,n){this.options=e.extend(n,{}),void 0!==window.marked&&(window.marked.setOptions(n),t.$container.querySelector('a[data-coder-type="html"]').innerHTML="Markdown",t.on("change",this.change.bind(this),20))}change(e,t){if("html"===e.type){try{e.content=window.marked(e.content)}catch(n){return t(n,e)}t(null,e)}else t(null,e)}}}),e("skylark-widgets-coder/plugins/console",["../util"],function(e){"use strict";return class{constructor(t,n){n=e.extend(n,{autoClear:!1});var s=`(function ${this.capture.toString()})();`,i=document.createElement("li");e.addClass(i,"coder-nav-item coder-nav-item-console"),i.innerHTML='<a href="#" data-coder-type="console">JS Console</a>';var r=document.createElement("div");e.addClass(r,"coder-pane coder-pane-console"),r.innerHTML='\n      <div class="coder-console-container">\n        <ul class="coder-console-output"></ul>\n        <form class="coder-console-input">\n          <input type="text">\n        </form>\n      </div>\n      <button class="coder-button coder-console-clear">Clear</button>\n    ',t.$container.appendChild(r),t.$container.querySelector(".coder-nav").appendChild(i);var o=t.$container.querySelector(".coder-console-container"),a=t.$container.querySelector(".coder-console-output"),c=t.$container.querySelector(".coder-console-input input"),l=t.$container.querySelector(".coder-console-input"),d=t.$container.querySelector(".coder-console-clear");l.addEventListener("submit",this.submit.bind(this)),c.addEventListener("keydown",this.history.bind(this)),d.addEventListener("click",this.clear.bind(this)),!0===n.autoClear&&t.on("change",this.autoClear.bind(this),29),t.on("change",this.change.bind(this),30),window.addEventListener("message",this.getMessage.bind(this)),this.$coderContainer=t.$container,this.$container=o,this.$input=c,this.$output=a,this.history=[],this.historyIndex=0,this.logCaptureSnippet=s,this.contentCache={html:"",css:"",js:""},this.getIframe=this.getIframe.bind(this)}getIframe(){return this.$coderContainer.querySelector(".coder-pane-result iframe")}getMessage(e){if(e.source===this.getIframe().contentWindow){var t={};try{t=JSON.parse(e.data)}catch(e){}"coder-console-log"===t.type&&this.log(t.message)}}autoClear(e,t){var n=e.content;"js"===e.type&&(n=n.replace(this.logCaptureSnippet,"")),!0!==e.forceRender&&this.contentCache[e.type]===n||this.clear(),this.contentCache[e.type]=n,t(null,e)}change(e,t){if("js"!==e.type)return t(null,e);-1===e.content.indexOf(this.logCaptureSnippet)&&(e.content=`${this.logCaptureSnippet}${e.content}`),t(null,e)}capture(){void 0!==window.console&&void 0!==window.console.log||(window.console={log:function(){}});var e=Function.prototype.bind.call(window.console.log,window.console);window.console.log=function(){[].slice.call(arguments).forEach(function(e){window.parent.postMessage(JSON.stringify({type:"coder-console-log",message:e}),"*")}),e.apply(e,arguments)}}log(t="",n){var s=document.createElement("li");e.addClass(s,"coder-console-log"),void 0!==n&&e.addClass(s,`coder-console-log-${n}`),s.innerHTML=t,this.$output.appendChild(s)}submit(e){var t=this.$input.value.trim();if(""===t)return e.preventDefault();this.history.push(t),this.historyIndex=this.history.length,this.log(t,"history"),0!==t.indexOf("return")&&(t="return "+t);try{var n=this.getIframe().contentWindow.eval(`(function() {${t}})()`);this.log(n)}catch(e){this.log(e,"error")}this.$input.value="",this.$container.scrollTop=this.$container.scrollHeight,e.preventDefault()}clear(){this.$output.innerHTML=""}history(e){var t=!1,n=this.$input.selectionStart;38===e.keyCode&&0!==this.historyIndex&&0===n&&(this.historyIndex--,t=!0),40===e.keyCode&&this.historyIndex!==this.history.length-1&&n===this.$input.value.length&&(this.historyIndex++,t=!0),t&&(this.$input.value=this.history[this.historyIndex])}}}),e("skylark-widgets-coder/plugins/play",["../util"],function(e){"use strict";return class{constructor(t,n){var s={};!1===(n=e.extend(n,{firstRun:!0})).firstRun&&(s={html:{type:"html",content:""},css:{type:"css",content:""},js:{type:"js",content:""}});var i=document.createElement("button");i.className="coder-button coder-button-play",i.innerHTML="Run",t.$container.appendChild(i),i.addEventListener("click",this.run.bind(this)),t.on("change",this.change.bind(this),10),this.cache=s,this.code={},this.coder=t}change(t,n){this.code[t.type]=e.extend(t),void 0!==this.cache[t.type]?(n(null,this.cache[t.type]),this.cache[t.type].forceRender=null):(this.cache[t.type]=e.extend(t),n(null,t))}run(){for(let t in this.code)this.cache[t]=e.extend(this.code[t],{forceRender:!0}),this.coder.trigger("change",this.cache[t])}}}),e("skylark-widgets-coder/plugins/pen",[],function(){"use strict";return class{constructor(e,t){let n={html:{title:"HTML",classChecker:"coder-has-html"},css:{title:"CSS",classChecker:"coder-has-css"},js:{title:"JavaScript",classChecker:"coder-has-js"},console:{title:"Console",classChecker:"coder-plugin-console"}},s=[];for(let t in n)e.$container.classList.contains(n[t].classChecker)&&s.push(e.$container.querySelector(`.coder-pane-${t}`));this.resizablePanes=[];for(let t=0;t<s.length;t++){let i;for(let e=0;e<s[t].classList.length;e++)if(-1!==s[t].classList[e].indexOf("coder-pane-")){i=s[t].classList[e].replace("coder-pane-","");break}if(!i)continue;let r={container:s[t],expander:void 0};this.resizablePanes.push(r);let o=document.createElement("div");o.classList.add("coder-pane-title"),o.innerHTML=n[i].title||i;let a=s[t].firstElementChild;a.insertBefore(o,a.firstChild),t>0&&(r.expander=document.createElement("div"),r.expander.classList.add("coder-plugin-pen-expander"),r.expander.addEventListener("mousedown",this.startExpand.bind(this,e)),a.insertBefore(r.expander,o))}}startExpand(e,t){let n=this.resizablePanes.filter(e=>e.expander===t.target).shift(),s=this.resizablePanes[this.resizablePanes.indexOf(n)-1],i=100/parseInt(window.getComputedStyle(n.container.parentNode).width,10);n.container.parentNode.style.display="none",n.startX=t.clientX,n.startWidth=parseFloat(window.getComputedStyle(n.container).width,10),s.startWidth=parseFloat(window.getComputedStyle(s.container).width,10),n.container.parentNode.style.display="",n.mousemove=this.doDrag.bind(this,n,s,i),n.mouseup=this.stopDrag.bind(this,n),document.addEventListener("mousemove",n.mousemove,!1),document.addEventListener("mouseup",n.mouseup,!1)}doDrag(e,t,n,s){let i=t.startWidth+(s.clientX-e.startX)*n,r=e.startWidth-(s.clientX-e.startX)*n;i>=10&&r>=10&&(e.container.style.maxWidth="none",t.container.style.maxWidth="none",t.container.style.width=`${i}%`,e.container.style.width=`${r}%`)}stopDrag(e,t){document.removeEventListener("mousemove",e.mousemove,!1),document.removeEventListener("mouseup",e.mouseup,!1)}}}),e("skylark-widgets-coder/bundle-plugins",["./plugins/render","./plugins/scriptless","./plugins/ace","./plugins/codemirror","./plugins/less","./plugins/coffeescript","./plugins/stylus","./plugins/babel","./plugins/markdown","./plugins/console","./plugins/play","./plugins/pen"],function(e,t,n,s,i,r,o,a,c,l,d,u){"use strict";return function(h){h.plugin("render",e),h.plugin("scriptless",t),h.plugin("ace",n),h.plugin("codemirror",s),h.plugin("less",i),h.plugin("coffeescript",r),h.plugin("stylus",o),h.plugin("babel",a),h.plugin("markdown",c),h.plugin("console",l),h.plugin("play",d),h.plugin("pen",u)}}),e("skylark-widgets-coder/Coder",["skylark-langx/skylark","./util","./template","./plugin","./pubsoup","./bundle-plugins"],function(e,t,n,s,i,r){"use strict";class o{constructor(e,r){if(!e)throw new Error("Can't find Coder container.");var o={};this._get=function(e){return o[e]},this._set=function(e,t){return o[e]=t,o[e]};var a=this._set("options",t.extend(r,{files:[],showBlank:!1,runScripts:!0,pane:"result",debounce:250,plugins:[]}));a.plugins.push("render"),!1===a.runScripts&&a.plugins.push("scriptless"),this._set("cachedContent",{html:null,css:null,js:null});var c=this._set("pubsoup",new i);this._set("trigger",this.trigger()),this._set("on",function(){c.subscribe.apply(c,arguments)}),this._set("off",function(){c.unsubscribe.apply(c,arguments)});var l=this._set("done",function(){c.done.apply(c,arguments)});l("change",this.errors.bind(this));var d=this._set("$container",e);d.innerHTML=n.container(),t.addClass(d,n.containerClass());var u=this._set("paneActive",a.pane);t.addClass(d,n.paneActiveClass(u)),this._set("$status",{});for(let e of["html","css","js"])this.markup(e);d.addEventListener("keyup",t.debounce(this.change.bind(this),a.debounce)),d.addEventListener("change",t.debounce(this.change.bind(this),a.debounce)),d.addEventListener("click",this.pane.bind(this)),this.$container=this._get("$container"),this.on=this._get("on"),this.off=this._get("off"),this.done=this._get("done"),this.trigger=this._get("trigger"),this.paneActive=this._get("paneActive"),this._set("plugins",{}),s.init.call(this);for(let e of["html","css","js"])this.load(e);if(a.showBlank)for(let e of["html","css","js"])t.addClass(d,n.hasFileClass(e))}findFile(e){var t=this._get("options");for(let n in t.files){let s=t.files[n];if(s.type===e)return s}return{}}markup(e){var s=this._get("$container"),i=s.querySelector(`.coder-pane-${e}`),r=this.findFile(e),o=document.createElement("div");o.innerHTML=n.editorContent(e,r.url),o.className=n.editorClass(e),i.appendChild(o),this._get("$status")[e]=i.querySelector(".coder-status"),void 0===r.url&&void 0===r.content||t.addClass(s,n.hasFileClass(e))}load(e){var s=this.findFile(e),i=this._get("$container").querySelector(`.coder-pane-${e} textarea`);void 0!==s.content?this.setValue(i,s.content):void 0!==s.url?(this.status("loading",[n.statusLoading(s.url)],{type:e,file:s}),t.fetch(s.url,(t,s)=>{t?this.status("error",[n.statusFetchError(t)],{type:e}):(this.clearStatus("loading",{type:e}),this.setValue(i,s))})):this.setValue(i,"")}setValue(e,t){e.value=t,this.change({target:e})}change(e){var n=t.data(e.target,"coder-type");if(n){var s=this._get("cachedContent");s[n]!==e.target.value&&(s[n]=e.target.value,this.trigger("change",{type:n,file:t.data(e.target,"coder-file"),content:s[n]}))}}errors(e,t){this.status("error",e,t)}pane(e){if(t.data(e.target,"coder-type")){var s=this._get("$container"),i=this._get("paneActive");t.removeClass(s,n.paneActiveClass(i)),i=this._set("paneActive",t.data(e.target,"coder-type")),t.addClass(s,n.paneActiveClass(i)),e.preventDefault()}}status(e="error",s=[],i={}){if(!s.length)return this.clearStatus(e,i);var r=this._get("$status");t.addClass(r[i.type],n.statusClass(e)),t.addClass(this._get("$container"),n.statusActiveClass(i.type));var o="";s.forEach(function(e){o+=n.statusMessage(e)}),r[i.type].innerHTML=o}clearStatus(e,s){var i=this._get("$status");t.removeClass(i[s.type],n.statusClass(e)),t.removeClass(this._get("$container"),n.statusActiveClass(s.type)),i[s.type].innerHTML=""}trigger(){var e=this._get("options"),t=this._get("pubsoup");if(!1===e.debounce)return function(){t.publish.apply(t,arguments)};var n={},s={};return function(i,{type:r="default"}={}){n[r]?s[r]=!0:t.publish.apply(t,arguments),clearTimeout(n[r]),n[r]=setTimeout(()=>{s[r]&&t.publish.apply(t,arguments),s[r]=null,n[r]=null},e.debounce)}}}return o.plugin=function(){return s.register.apply(this,arguments)},r(o),e.attach("widgets.Coder",o)}),e("skylark-widgets-coder/main",["./Coder"],function(e){return e}),e("skylark-widgets-coder",["skylark-widgets-coder/main"],function(e){return e})}(n),!i){var a=s("skylark-langx/skylark");r?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-coder.js.map
