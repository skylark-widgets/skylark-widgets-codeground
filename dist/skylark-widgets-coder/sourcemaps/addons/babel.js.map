{"version":3,"sources":["addons/babel.js"],"names":["define","langx","util","Coder","PluginBabel","[object Object]","coder","options","this","clone","window","Babel","babel","transform","$container","querySelector","innerHTML","on","change","bind","params","callback","type","content","code","err","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBAEMC,EACFC,YAAYC,EAAOC,GAGf,GADAC,KAAKD,QAAUN,EAAMQ,MAAMF,QACC,IAAjBG,OAAOC,MACdH,KAAKI,MAAQF,OAAOC,UACjB,CAAA,QAA4B,IAAjBD,OAAOE,MAGrB,OAFAJ,KAAKI,OAAUC,UAAWH,OAAOE,OAIrCN,EAAMQ,WAAWC,cAAc,2BAA2BC,UAAY,SACtEV,EAAMW,GAAG,SAAUT,KAAKU,OAAOC,KAAKX,MAVrB,IAYnBH,OAAOe,EAAQC,GACX,GAAoB,OAAhBD,EAAOE,KAAe,CACtB,IACIF,EAAOG,QAAUf,KAAKI,MAAMC,UAAUO,EAAOG,QAASf,KAAKD,SAASiB,KACtE,MAAOC,GACL,OAAOJ,EAASI,EAAKL,GAEzBC,EAAS,KAAMD,QAEfC,EAAS,KAAMD,IAO3B,OAFAjB,EAAMuB,OAAO,QAAStB,GAEfA","file":"../../addons/babel.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    \n    class PluginBabel {\n        constructor(coder, options) {\n            var priority = 20;\n            this.options = langx.clone(options);\n            if (typeof window.Babel !== 'undefined') {\n                this.babel = window.Babel;\n            } else if (typeof window.babel !== 'undefined') {\n                this.babel = { transform: window.babel };\n            } else {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"js\"]').innerHTML = 'ES2015';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        change(params, callback) {\n            if (params.type === 'js') {\n                try {\n                    params.content = this.babel.transform(params.content, this.options).code;\n                } catch (err) {\n                    return callback(err, params);\n                }\n                callback(null, params);\n            } else {\n                callback(null, params);\n            }\n        }\n    };\n\n    Coder.plugin('babel', PluginBabel);\n\n    return PluginBabel;\n});"]}