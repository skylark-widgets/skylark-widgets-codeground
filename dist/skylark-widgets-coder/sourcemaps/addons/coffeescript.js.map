{"version":3,"sources":["addons/coffeescript.js"],"names":["define","langx","util","Coder","PluginCoffeeScript","[object Object]","coder","options","clone","window","CoffeeScript","$container","querySelector","innerHTML","on","this","change","bind","params","type","file","indexOf","e","data","isCoffee","content","compile","err","callback","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBACMC,EACFC,YAAYC,EAAOC,GAEfA,EAAUN,EAAMO,MAAMD,QACa,IAAxBE,OAAOC,eAGlBJ,EAAMK,WAAWC,cAAc,2BAA2BC,UAAY,eACtEP,EAAMQ,GAAG,SAAUC,KAAKC,OAAOC,KAAKF,MANrB,KAQnBV,SAASa,GACL,MAAoB,OAAhBA,EAAOC,QAGgC,IAApCD,EAAOE,KAAKC,QAAQ,YAAqC,KAAhBH,EAAOE,MAE3Df,OAAOiB,GACH,IAAIJ,EAASI,EAAEC,KACf,GAAIR,KAAKS,SAASN,GACd,IACIA,EAAOO,QAAUhB,OAAOC,aAAagB,QAAQR,EAAOO,SACtD,MAAOE,GACL,OAAOC,SAASD,EAAKT,KASrC,OAFAf,EAAM0B,OAAO,eAAgBzB,GAEtBA","file":"../../addons/coffeescript.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    class PluginCoffeeScript {\n        constructor(coder, options) {\n            var priority = 20;\n            options = langx.clone(options);\n            if (typeof window.CoffeeScript === 'undefined') {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"js\"]').innerHTML = 'CoffeeScript';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        isCoffee(params) {\n            if (params.type !== 'js') {\n                return false;\n            }\n            return params.file.indexOf('.coffee') !== -1 || params.file === '';\n        }\n        change(e) {\n            var params = e.data;\n            if (this.isCoffee(params)) {\n                try {\n                    params.content = window.CoffeeScript.compile(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n            }\n            //callback(null, params);\n        }\n    };\n\n    Coder.plugin('coffeescript', PluginCoffeeScript);\n\n    return PluginCoffeeScript;\n});"]}