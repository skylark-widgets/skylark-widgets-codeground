{"version":3,"sources":["addons/css/less.js"],"names":["define","langx","Addon","util","addons","PluginLess","[object Object]","super","_init","coder","this","options","window","less","$container","querySelector","innerHTML","on","change","bind","params","type","file","indexOf","e","data","isLess","render","content","err","res","callback","css","categoryName","addonName"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,gBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBACMC,UAAmBH,EAGrBI,QACIC,MAAMC,QACN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,aAIQ,IAAhBC,OAAOC,OAGlBJ,EAAMK,WAAWC,cAAc,4BAA4BC,UAAY,OACvEP,EAAMQ,GAAG,SAAUP,KAAKQ,OAAOC,KAAKT,MANrB,KASnBJ,OAAOc,GACH,MAAoB,QAAhBA,EAAOC,QAG8B,IAAlCD,EAAOE,KAAKC,QAAQ,UAAmC,KAAhBH,EAAOE,MAEzDhB,OAAOkB,GACH,IAAIJ,EAASI,EAAEC,KACXf,KAAKgB,OAAON,IACZR,OAAOC,KAAKc,OAAOP,EAAOQ,QAASlB,KAAKC,QAAS,CAACkB,EAAKC,KACnD,GAAID,EACA,OAAOE,SAASF,EAAKT,GAErBA,EAAOQ,QAAUE,EAAIE,MASrCC,0BACI,MAAO,MAGXC,uBACI,MAAO,QAMf,OAFA9B,EAAO4B,IAAInB,KAAOR,EAEXA","file":"../../../addons/css/less.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../Addon\",\n    '../../util',\n    \"../../addons\"\n], function (langx,Addon,util,addons) {\n    'use strict';\n    class PluginLess extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n            var coder = this.coder,\n                options = this.options;\n\n            var priority = 20;\n\n            if (typeof window.less === 'undefined') {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"css\"]').innerHTML = 'Less';\n            coder.on('change', this.change.bind(this), priority);\n        }\n\n        isLess(params) {\n            if (params.type !== 'css') {\n                return false;\n            }\n            return params.file.indexOf('.less') !== -1 || params.file === '';\n        }\n        change(e) {\n            var params = e.data;\n            if (this.isLess(params)) {\n                window.less.render(params.content, this.options, (err, res) => {\n                    if (err) {\n                        return callback(err, params);\n                    } else {\n                        params.content = res.css;\n                    }\n                    //callback(null, params);\n                });\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"css\";\n        }\n\n        static get addonName(){\n            return \"less\";\n        }\n    };\n\n    addons.css.less = PluginLess;\n\n    return PluginLess;\n});"]}