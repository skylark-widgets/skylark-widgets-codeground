{"version":3,"sources":["addons/html/markdown.js"],"names":["define","langx","Addon","util","addons","PluginMarkdown","[object Object]","super","_init","coder","this","options","window","marked","setOptions","$container","querySelector","innerHTML","on","change","bind","e","params","data","type","content","err","callback","categoryName","addonName","html","markdown"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,gBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAwBH,EAG1BI,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MACbE,EAAUD,KAAKC,aAGU,IAAlBC,OAAOC,SAGlBD,OAAOC,OAAOC,WAAWH,GACzBF,EAAMM,WAAWC,cAAc,6BAA6BC,UAAY,WACxER,EAAMS,GAAG,SAAUR,KAAKS,OAAOC,KAAKV,MANrB,KAQnBJ,OAAOe,GACH,IAAIC,EAASD,EAAEE,KACf,GAAoB,SAAhBD,EAAOE,KACP,IACIF,EAAOG,QAAUb,OAAOC,OAAOS,EAAOG,SACxC,MAAOC,GACL,OAAOC,SAASD,EAAKJ,IAQjCM,0BACI,MAAO,OAGXC,uBACI,MAAO,YAOf,OAFAzB,EAAO0B,KAAKC,SAAW1B,EAEhBA","file":"../../../addons/html/markdown.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../Addon\",\n    '../../util',\n    \"../../addons\"\n], function (langx,Addon,util,addons) {\n    'use strict';\n    \n    class PluginMarkdown  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n\n            var priority = 20;\n            if (typeof window.marked === 'undefined') {\n                return;\n            }\n            window.marked.setOptions(options);\n            coder.$container.querySelector('a[data-coder-type=\"html\"]').innerHTML = 'Markdown';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        change(e) {\n            var params = e.data;\n            if (params.type === 'html') {\n                try {\n                    params.content = window.marked(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n                //callback(null, params);\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"html\";\n        }\n\n        static get addonName(){\n            return \"markdown\";\n        }\n\n    };\n\n    addons.html.markdown = PluginMarkdown;\n\n    return PluginMarkdown;\n});"]}