{"version":3,"sources":["addons/markdown.js"],"names":["define","langx","util","Coder","PluginMarkdown","[object Object]","coder","options","this","clone","window","marked","setOptions","$container","querySelector","innerHTML","on","change","bind","params","callback","type","content","err","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBAEMC,EACFC,YAAYC,EAAOC,GAEfC,KAAKD,QAAUN,EAAMQ,MAAMF,QACE,IAAlBG,OAAOC,SAGlBD,OAAOC,OAAOC,WAAWL,GACzBD,EAAMO,WAAWC,cAAc,6BAA6BC,UAAY,WACxET,EAAMU,GAAG,SAAUR,KAAKS,OAAOC,KAAKV,MAPrB,KASnBH,OAAOc,EAAQC,GACX,GAAoB,SAAhBD,EAAOE,KAAiB,CACxB,IACIF,EAAOG,QAAUZ,OAAOC,OAAOQ,EAAOG,SACxC,MAAOC,GACL,OAAOH,EAASG,EAAKJ,GAEzBC,EAAS,KAAMD,QAEfC,EAAS,KAAMD,IAO3B,OAFAhB,EAAMqB,OAAO,WAAYpB,GAElBA","file":"../../addons/markdown.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    \n    class PluginMarkdown {\n        constructor(coder, options) {\n            var priority = 20;\n            this.options = langx.clone(options);\n            if (typeof window.marked === 'undefined') {\n                return;\n            }\n            window.marked.setOptions(options);\n            coder.$container.querySelector('a[data-coder-type=\"html\"]').innerHTML = 'Markdown';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        change(params, callback) {\n            if (params.type === 'html') {\n                try {\n                    params.content = window.marked(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n                callback(null, params);\n            } else {\n                callback(null, params);\n            }\n        }\n    };\n\n    Coder.plugin('markdown', PluginMarkdown);\n\n    return PluginMarkdown;\n});"]}