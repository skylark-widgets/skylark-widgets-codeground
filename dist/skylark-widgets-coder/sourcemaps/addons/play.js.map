{"version":3,"sources":["addons/play.js"],"names":["define","langx","util","Coder","PluginPlay","[object Object]","coder","options","cache","mixin","firstRun","html","type","content","css","js","$button","document","createElement","className","innerHTML","$container","appendChild","addEventListener","this","run","bind","on","change","code","params","callback","clone","forceRender","trigger","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBACMC,EACFC,YAAYC,EAAOC,GAEf,IACIC,MAEqB,KAJzBD,EAAUN,EAAMQ,OAAQC,UAAU,GAAOH,IAI7BG,WACRF,GACIG,MACIC,KAAM,OACNC,QAAS,IAEbC,KACIF,KAAM,MACNC,QAAS,IAEbE,IACIH,KAAM,KACNC,QAAS,MAIrB,IAAIG,EAAUC,SAASC,cAAc,UACrCF,EAAQG,UAAY,iCACpBH,EAAQI,UAAY,MACpBd,EAAMe,WAAWC,YAAYN,GAC7BA,EAAQO,iBAAiB,QAASC,KAAKC,IAAIC,KAAKF,OAChDlB,EAAMqB,GAAG,SAAUH,KAAKI,OAAOF,KAAKF,MAxBrB,IAyBfA,KAAKhB,MAAQA,EACbgB,KAAKK,QACLL,KAAKlB,MAAQA,EAEjBD,OAAOyB,EAAQC,GACXP,KAAKK,KAAKC,EAAOlB,MAAQX,EAAM+B,MAAMF,QACE,IAA5BN,KAAKhB,MAAMsB,EAAOlB,OACzBmB,EAAS,KAAMP,KAAKhB,MAAMsB,EAAOlB,OACjCY,KAAKhB,MAAMsB,EAAOlB,MAAMqB,YAAc,OAEtCT,KAAKhB,MAAMsB,EAAOlB,MAAQX,EAAM+B,MAAMF,GACtCC,EAAS,KAAMD,IAGvBzB,MACI,IAAK,IAAIO,KAAQY,KAAKK,KAClBL,KAAKhB,MAAMI,GAAQX,EAAMQ,OAAQwB,aAAa,GAAOT,KAAKK,KAAKjB,IAC/DY,KAAKlB,MAAM4B,QAAQ,SAAUV,KAAKhB,MAAMI,KAOpD,OAFAT,EAAMgC,OAAO,OAAQ/B,GAEdA","file":"../../addons/play.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    class PluginPlay {\n        constructor(coder, options) {\n            options = langx.mixin({ firstRun: true },options);\n            var priority = 10;\n            var cache = {};\n            var code = {};\n            if (options.firstRun === false) {\n                cache = {\n                    html: {\n                        type: 'html',\n                        content: ''\n                    },\n                    css: {\n                        type: 'css',\n                        content: ''\n                    },\n                    js: {\n                        type: 'js',\n                        content: ''\n                    }\n                };\n            }\n            var $button = document.createElement('button');\n            $button.className = 'coder-button coder-button-play';\n            $button.innerHTML = 'Run';\n            coder.$container.appendChild($button);\n            $button.addEventListener('click', this.run.bind(this));\n            coder.on('change', this.change.bind(this), priority);\n            this.cache = cache;\n            this.code = code;\n            this.coder = coder;\n        }\n        change(params, callback) {\n            this.code[params.type] = langx.clone(params);\n            if (typeof this.cache[params.type] !== 'undefined') {\n                callback(null, this.cache[params.type]);\n                this.cache[params.type].forceRender = null;\n            } else {\n                this.cache[params.type] = langx.clone(params);\n                callback(null, params);\n            }\n        }\n        run() {\n            for (let type in this.code) {\n                this.cache[type] = langx.mixin({ forceRender: true },this.code[type]);\n                this.coder.trigger('change', this.cache[type]);\n            }\n        }\n    };\n\n    Coder.plugin('play', PluginPlay);\n\n    return PluginPlay;\n});"]}