{"version":3,"sources":["addons/play.js"],"names":["define","langx","util","Coder","PluginPlay","[object Object]","coder","options","cache","mixin","firstRun","html","type","content","css","js","$button","document","createElement","className","innerHTML","$container","appendChild","addEventListener","this","run","bind","on","change","code","e","params","data","clone","callback","forceRender","emit","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBACMC,EACFC,YAAYC,EAAOC,GAEf,IACIC,MAEqB,KAJzBD,EAAUN,EAAMQ,OAAQC,UAAU,GAAOH,IAI7BG,WACRF,GACIG,MACIC,KAAM,OACNC,QAAS,IAEbC,KACIF,KAAM,MACNC,QAAS,IAEbE,IACIH,KAAM,KACNC,QAAS,MAIrB,IAAIG,EAAUC,SAASC,cAAc,UACrCF,EAAQG,UAAY,iCACpBH,EAAQI,UAAY,MACpBd,EAAMe,WAAWC,YAAYN,GAC7BA,EAAQO,iBAAiB,QAASC,KAAKC,IAAIC,KAAKF,OAChDlB,EAAMqB,GAAG,SAAUH,KAAKI,OAAOF,KAAKF,MAxBrB,IAyBfA,KAAKhB,MAAQA,EACbgB,KAAKK,QACLL,KAAKlB,MAAQA,EAEjBD,OAAOyB,GACH,IAAIC,EAASD,EAAEE,KACfR,KAAKK,KAAKE,EAAOnB,MAAQX,EAAMgC,MAAMF,QACE,IAA5BP,KAAKhB,MAAMuB,EAAOnB,OACzBsB,SAAS,KAAMV,KAAKhB,MAAMuB,EAAOnB,OACjCY,KAAKhB,MAAMuB,EAAOnB,MAAMuB,YAAc,MAEtCX,KAAKhB,MAAMuB,EAAOnB,MAAQX,EAAMgC,MAAMF,GAI9C1B,MACI,IAAK,IAAIO,KAAQY,KAAKK,KAClBL,KAAKhB,MAAMI,GAAQX,EAAMQ,OAAQ0B,aAAa,GAAOX,KAAKK,KAAKjB,IAC/DY,KAAKlB,MAAM8B,KAAK,SAAUZ,KAAKhB,MAAMI,KAOjD,OAFAT,EAAMkC,OAAO,OAAQjC,GAEdA","file":"../../addons/play.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    class PluginPlay {\n        constructor(coder, options) {\n            options = langx.mixin({ firstRun: true },options);\n            var priority = 10;\n            var cache = {};\n            var code = {};\n            if (options.firstRun === false) {\n                cache = {\n                    html: {\n                        type: 'html',\n                        content: ''\n                    },\n                    css: {\n                        type: 'css',\n                        content: ''\n                    },\n                    js: {\n                        type: 'js',\n                        content: ''\n                    }\n                };\n            }\n            var $button = document.createElement('button');\n            $button.className = 'coder-button coder-button-play';\n            $button.innerHTML = 'Run';\n            coder.$container.appendChild($button);\n            $button.addEventListener('click', this.run.bind(this));\n            coder.on('change', this.change.bind(this), priority);\n            this.cache = cache;\n            this.code = code;\n            this.coder = coder;\n        }\n        change(e) {\n            var params = e.data;\n            this.code[params.type] = langx.clone(params);\n            if (typeof this.cache[params.type] !== 'undefined') {\n                callback(null, this.cache[params.type]);\n                this.cache[params.type].forceRender = null;\n            } else {\n                this.cache[params.type] = langx.clone(params);\n                //callback(null, params);\n            }\n        }\n        run() {\n            for (let type in this.code) {\n                this.cache[type] = langx.mixin({ forceRender: true },this.code[type]);\n                this.coder.emit('change', this.cache[type]);\n            }\n        }\n    };\n\n    Coder.plugin('play', PluginPlay);\n\n    return PluginPlay;\n});"]}