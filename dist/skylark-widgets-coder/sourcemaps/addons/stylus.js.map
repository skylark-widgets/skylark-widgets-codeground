{"version":3,"sources":["addons/stylus.js"],"names":["define","langx","util","Coder","PluginStylus","[object Object]","coder","options","clone","window","stylus","$container","querySelector","innerHTML","on","this","change","bind","params","type","file","indexOf","e","data","isStylus","content","render","err","res","callback","plugin"],"mappings":";;;;;;;AAAAA,QACI,sBACA,UACA,YACD,SAAUC,EAAMC,EAAKC,GACpB,mBAEMC,EACFC,YAAYC,EAAOC,GAEfA,EAAUN,EAAMO,MAAMD,QACO,IAAlBE,OAAOC,SAGlBJ,EAAMK,WAAWC,cAAc,4BAA4BC,UAAY,SACvEP,EAAMQ,GAAG,SAAUC,KAAKC,OAAOC,KAAKF,MANrB,KAQnBV,SAASa,GACL,MAAoB,QAAhBA,EAAOC,QAG8B,IAAlCD,EAAOE,KAAKC,QAAQ,UAAmC,KAAhBH,EAAOE,MAEzDf,OAAOiB,GACH,IAAIJ,EAASI,EAAEC,KACXR,KAAKS,SAASN,IACdT,OAAOC,OAAOQ,EAAOO,QAASV,KAAKR,SAASmB,OAAO,CAACC,EAAKC,KACrD,GAAID,EACA,OAAOE,SAASF,EAAKT,GAErBA,EAAOO,QAAUG,KAYrC,OAFAzB,EAAM2B,OAAO,SAAU1B,GAEhBA","file":"../../addons/stylus.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    '../util',\n    \"../Coder\"\n], function (langx,util,Coder) {\n    'use strict';\n    \n    class PluginStylus {\n        constructor(coder, options) {\n            var priority = 20;\n            options = langx.clone(options);\n            if (typeof window.stylus === 'undefined') {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"css\"]').innerHTML = 'Stylus';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        isStylus(params) {\n            if (params.type !== 'css') {\n                return false;\n            }\n            return params.file.indexOf('.styl') !== -1 || params.file === '';\n        }\n        change(e) {\n            var params = e.data;\n            if (this.isStylus(params)) {\n                window.stylus(params.content, this.options).render((err, res) => {\n                    if (err) {\n                        return callback(err, params);\n                    } else {\n                        params.content = res;\n                    }\n                    //callback(null, params);\n                });\n            } else {\n                //callback(null, params);\n            }\n        }\n    };\n\n    Coder.plugin('stylus', PluginStylus);\n\n    return PluginStylus;\n});"]}