{"version":3,"sources":["plugins/play.js"],"names":["define","util","[object Object]","coder","options","cache","extend","firstRun","html","type","content","css","js","$button","document","createElement","className","innerHTML","$container","appendChild","addEventListener","this","run","bind","on","change","code","params","callback","forceRender","trigger"],"mappings":";;;;;;;AAAAA,QAAQ,WAAY,SAAUC,GAC1B,aACA,aACIC,YAAYC,EAAOC,GAEf,IACIC,MAEqB,KAJzBD,EAAUH,EAAKK,OAAOF,GAAWG,UAAU,KAI/BA,WACRF,GACIG,MACIC,KAAM,OACNC,QAAS,IAEbC,KACIF,KAAM,MACNC,QAAS,IAEbE,IACIH,KAAM,KACNC,QAAS,MAIrB,IAAIG,EAAUC,SAASC,cAAc,UACrCF,EAAQG,UAAY,iCACpBH,EAAQI,UAAY,MACpBd,EAAMe,WAAWC,YAAYN,GAC7BA,EAAQO,iBAAiB,QAASC,KAAKC,IAAIC,KAAKF,OAChDlB,EAAMqB,GAAG,SAAUH,KAAKI,OAAOF,KAAKF,MAxBrB,IAyBfA,KAAKhB,MAAQA,EACbgB,KAAKK,QACLL,KAAKlB,MAAQA,EAEjBD,OAAOyB,EAAQC,GACXP,KAAKK,KAAKC,EAAOlB,MAAQR,EAAKK,OAAOqB,QACE,IAA5BN,KAAKhB,MAAMsB,EAAOlB,OACzBmB,EAAS,KAAMP,KAAKhB,MAAMsB,EAAOlB,OACjCY,KAAKhB,MAAMsB,EAAOlB,MAAMoB,YAAc,OAEtCR,KAAKhB,MAAMsB,EAAOlB,MAAQR,EAAKK,OAAOqB,GACtCC,EAAS,KAAMD,IAGvBzB,MACI,IAAK,IAAIO,KAAQY,KAAKK,KAClBL,KAAKhB,MAAMI,GAAQR,EAAKK,OAAOe,KAAKK,KAAKjB,IAASoB,aAAa,IAC/DR,KAAKlB,MAAM2B,QAAQ,SAAUT,KAAKhB,MAAMI","file":"../../plugins/play.js","sourcesContent":["define(['../util'], function (util) {\n    'use strict';\n    return class PluginPlay {\n        constructor(coder, options) {\n            options = util.extend(options, { firstRun: true });\n            var priority = 10;\n            var cache = {};\n            var code = {};\n            if (options.firstRun === false) {\n                cache = {\n                    html: {\n                        type: 'html',\n                        content: ''\n                    },\n                    css: {\n                        type: 'css',\n                        content: ''\n                    },\n                    js: {\n                        type: 'js',\n                        content: ''\n                    }\n                };\n            }\n            var $button = document.createElement('button');\n            $button.className = 'coder-button coder-button-play';\n            $button.innerHTML = 'Run';\n            coder.$container.appendChild($button);\n            $button.addEventListener('click', this.run.bind(this));\n            coder.on('change', this.change.bind(this), priority);\n            this.cache = cache;\n            this.code = code;\n            this.coder = coder;\n        }\n        change(params, callback) {\n            this.code[params.type] = util.extend(params);\n            if (typeof this.cache[params.type] !== 'undefined') {\n                callback(null, this.cache[params.type]);\n                this.cache[params.type].forceRender = null;\n            } else {\n                this.cache[params.type] = util.extend(params);\n                callback(null, params);\n            }\n        }\n        run() {\n            for (let type in this.code) {\n                this.cache[type] = util.extend(this.code[type], { forceRender: true });\n                this.coder.trigger('change', this.cache[type]);\n            }\n        }\n    };\n});"]}