/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../../Coder"],function(n){"use strict";function o(o,t,i,l){function f(n){var e=d(o,t);if(!e||e.to.line-e.from.line<a)return null;for(var r=o.findMarksAt(e.from),i=0;i<r.length;++i)if(r[i].__isFold&&"fold"!==l){if(!n)return null;e.cleared=!0,r[i].clear()}return e}if(i&&i.call){var d=i;i=null}else var d=r(o,i,"rangeFinder");"number"==typeof t&&(t=n.Pos(t,0));var a=r(o,i,"minFoldSize"),u=f(!0);if(r(o,i,"scanUp"))for(;!u&&t.line>o.firstLine();)t=n.Pos(t.line-1,0),u=f(!1);if(u&&!u.cleared&&"unfold"!==l){var c=e(o,i);n.on(c,"mousedown",function(o){s.clear(),n.e_preventDefault(o)});var s=o.markText(u.from,u.to,{replacedWith:c,clearOnEnter:r(o,i,"clearOnEnter"),__isFold:!0});s.on("clear",function(e,r){n.signal(o,"unfold",o,e,r)}),n.signal(o,"fold",o,u.from,u.to)}}function e(n,o){var e=r(n,o,"widget");if("string"==typeof e){var t=document.createTextNode(e);e=document.createElement("span"),e.appendChild(t),e.className="CodeMirror-foldmarker"}return e}function r(n,o,e){if(o&&void 0!==o[e])return o[e];var r=n.options.foldOptions;return r&&void 0!==r[e]?r[e]:t[e]}n.newFoldFunction=function(n,e){return function(r,t){o(r,t,{rangeFinder:n,widget:e})}},n.defineExtension("foldCode",function(n,e,r){o(this,n,e,r)}),n.defineExtension("isFolded",function(n){for(var o=this.findMarksAt(n),e=0;e<o.length;++e)if(o[e].__isFold)return!0}),n.commands.toggleFold=function(n){n.foldCode(n.getCursor())},n.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")},n.commands.unfold=function(n){n.foldCode(n.getCursor(),null,"unfold")},n.commands.foldAll=function(o){o.operation(function(){for(var e=o.firstLine(),r=o.lastLine();e<=r;e++)o.foldCode(n.Pos(e,0),null,"fold")})},n.commands.unfoldAll=function(o){o.operation(function(){for(var e=o.firstLine(),r=o.lastLine();e<=r;e++)o.foldCode(n.Pos(e,0),null,"unfold")})},n.registerHelper("fold","combine",function(){var n=Array.prototype.slice.call(arguments,0);return function(o,e){for(var r=0;r<n.length;++r){var t=n[r](o,e);if(t)return t}}}),n.registerHelper("fold","auto",function(n,o){for(var e=n.getHelpers(o,"fold"),r=0;r<e.length;r++){var t=e[r](n,o);if(t)return t}});var t={rangeFinder:n.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1,clearOnEnter:!0};n.defineOption("foldOptions",null),n.defineExtension("foldOption",function(n,o){return r(this,n,o)})});
//# sourceMappingURL=../../sourcemaps/addon/fold/foldcode.js.map
