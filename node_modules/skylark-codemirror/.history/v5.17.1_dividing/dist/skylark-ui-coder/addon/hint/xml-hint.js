/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../../Coder"],function(t){"use strict";function e(e,s){var n=s&&s.schemaInfo,a=s&&s.quoteChar||'"';if(n){var i=e.getCursor(),l=e.getTokenAt(i);l.end>i.ch&&(l.end=i.ch,l.string=l.string.slice(0,i.ch-l.start));var o=t.innerMode(e.getMode(),l.state);if("xml"==o.mode.name){var g,f,h=[],c=!1,p=/\btag\b/.test(l.type)&&!/>$/.test(l.string),u=p&&/^\w/.test(l.string);if(u){var v=e.getLine(i.line).slice(Math.max(0,l.start-2),l.start),d=/<\/$/.test(v)?"close":/<$/.test(v)?"open":null;d&&(f=l.start-("close"==d?2:1))}else p&&"<"==l.string?d="open":p&&"</"==l.string&&(d="close");if(!p&&!o.state.tagName||d){u&&(g=l.string),c=d;var m=o.state.context,y=m&&n[m.tagName],x=m?y&&y.children:n["!top"];if(x&&"close"!=d)for(var O=0;O<x.length;++O)g&&0!=x[O].lastIndexOf(g,0)||h.push("<"+x[O]);else if("close"!=d)for(var w in n)!n.hasOwnProperty(w)||"!top"==w||"!attrs"==w||g&&0!=w.lastIndexOf(g,0)||h.push("<"+w);m&&(!g||"close"==d&&0==m.tagName.lastIndexOf(g,0))&&h.push("</"+m.tagName+">")}else{var y=n[o.state.tagName],I=y&&y.attrs,P=n["!attrs"];if(!I&&!P)return;if(I){if(P){var A={};for(var N in P)P.hasOwnProperty(N)&&(A[N]=P[N]);for(var N in I)I.hasOwnProperty(N)&&(A[N]=I[N]);I=A}}else I=P;if("string"==l.type||"="==l.string){var b,v=e.getRange(r(i.line,Math.max(0,i.ch-60)),r(i.line,"string"==l.type?l.start:l.end)),M=v.match(/([^\s\u00a0=<>\"\']+)=$/);if(!M||!I.hasOwnProperty(M[1])||!(b=I[M[1]]))return;if("function"==typeof b&&(b=b.call(this,e)),"string"==l.type){g=l.string;var $=0;/['"]/.test(l.string.charAt(0))&&(a=l.string.charAt(0),g=l.string.slice(1),$++);var C=l.string.length;/['"]/.test(l.string.charAt(C-1))&&(a=l.string.charAt(C-1),g=l.string.substr($,C-2)),c=!0}for(var O=0;O<b.length;++O)g&&0!=b[O].lastIndexOf(g,0)||h.push(a+b[O]+a)}else{"attribute"==l.type&&(g=l.string,c=!0);for(var k in I)!I.hasOwnProperty(k)||g&&0!=k.lastIndexOf(g,0)||h.push(k)}}return{list:h,from:c?r(i.line,null==f?l.start:f):i,to:c?r(i.line,l.end):i}}}}var r=t.Pos;t.registerHelper("hint","xml",e)});
//# sourceMappingURL=../../sourcemaps/addon/hint/xml-hint.js.map
