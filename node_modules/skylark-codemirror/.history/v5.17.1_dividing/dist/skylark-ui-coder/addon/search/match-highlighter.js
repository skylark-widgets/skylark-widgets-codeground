/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../../Coder","./matchesonscrollbar"],function(t){"use strict";function e(t){this.options={};for(var e in h)this.options[e]=(t&&t.hasOwnProperty(e)?t:h)[e];this.overlay=this.timeout=null,this.matchesonscroll=null}function n(t){var e=t.state.matchHighlighter;clearTimeout(e.timeout),e.timeout=setTimeout(function(){i(t)},e.options.delay)}function o(t,e,n,o){var r=t.state.matchHighlighter;if(t.addOverlay(r.overlay=s(e,n,o)),r.options.annotateScrollbar&&t.showMatchesOnScrollbar){var i=n?new RegExp("\\b"+e+"\\b"):e;r.matchesonscroll=t.showMatchesOnScrollbar(i,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function r(t){var e=t.state.matchHighlighter;e.overlay&&(t.removeOverlay(e.overlay),e.overlay=null,e.matchesonscroll&&(e.matchesonscroll.clear(),e.matchesonscroll=null))}function i(t){t.operation(function(){var e=t.state.matchHighlighter;if(r(t),!t.somethingSelected()&&e.options.showToken){for(var n=e.options.showToken===!0?/[\w$]/:e.options.showToken,i=t.getCursor(),a=t.getLine(i.line),s=i.ch,h=s;s&&n.test(a.charAt(s-1));)--s;for(;h<a.length&&n.test(a.charAt(h));)++h;return void(s<h&&o(t,a.slice(s,h),n,e.options.style))}var c=t.getCursor("from"),g=t.getCursor("to");if(c.line==g.line&&(!e.options.wordsOnly||l(t,c,g))){var u=t.getRange(c,g);e.options.trim&&(u=u.replace(/^\s+|\s+$/g,"")),u.length>=e.options.minChars&&o(t,u,!1,e.options.style)}})}function l(t,e,n){var o=t.getRange(e,n);if(null!==o.match(/^\w+$/)){if(e.ch>0){var r={line:e.line,ch:e.ch-1},i=t.getRange(r,e);if(null===i.match(/\W/))return!1}if(n.ch<t.getLine(e.line).length){var r={line:n.line,ch:n.ch+1},i=t.getRange(n,r);if(null===i.match(/\W/))return!1}return!0}return!1}function a(t,e){return!(t.start&&e.test(t.string.charAt(t.start-1))||t.pos!=t.string.length&&e.test(t.string.charAt(t.pos)))}function s(t,e,n){return{token:function(o){return!o.match(t)||e&&!a(o,e)?(o.next(),void(o.skipTo(t.charAt(0))||o.skipToEnd())):n}}}var h={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};t.defineOption("highlightSelectionMatches",!1,function(o,l,a){a&&a!=t.Init&&(r(o),clearTimeout(o.state.matchHighlighter.timeout),o.state.matchHighlighter=null,o.off("cursorActivity",n)),l&&(o.state.matchHighlighter=new e(l),i(o),o.on("cursorActivity",n))})});
//# sourceMappingURL=../../sourcemaps/addon/search/match-highlighter.js.map
