/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../../Coder"],function(e){"use strict";e.defineMode("oz",function(e){function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e,t){if(e.eatSpace())return null;if(e.match(/[{}]/))return"bracket";if(e.match(/(\[])/))return"keyword";if(e.match(d)||e.match(s))return"operator";if(e.match(h))return"atom";var n=e.match(p);if(n)return t.doInCurrentLine?t.doInCurrentLine=!1:t.currentIndent++,"proc"==n[0]||"fun"==n[0]?t.tokenize=i:"class"==n[0]?t.tokenize=r:"meth"==n[0]&&(t.tokenize=a),"keyword";if(e.match(z)||e.match(k))return"keyword";if(e.match(x))return t.currentIndent--,"keyword";var u=e.next();if('"'==u||"'"==u)return t.tokenize=c(u),t.tokenize(e,t);if(/[~\d]/.test(u)){if("~"==u){if(!/^[0-9]/.test(e.peek()))return null;if("0"==e.next()&&e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/))return"number"}return"0"==u&&e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/)?"number":null}return"%"==u?(e.skipToEnd(),"comment"):"/"==u&&e.eat("*")?(t.tokenize=o,o(e,t)):f.test(u)?"operator":(e.eatWhile(/\w/),"variable")}function r(e,t){return e.eatSpace()?null:(e.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)/),t.tokenize=n,"variable-3")}function a(e,t){return e.eatSpace()?null:(e.match(/([a-zA-Z][A-Za-z0-9_]*)|(`.+`)/),t.tokenize=n,"def")}function i(e,t){return e.eatSpace()?null:!t.hasPassedFirstStage&&e.eat("{")?(t.hasPassedFirstStage=!0,"bracket"):t.hasPassedFirstStage?(e.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)|\$/),t.hasPassedFirstStage=!1,t.tokenize=n,"def"):(t.tokenize=n,null)}function o(e,t){for(var r,a=!1;r=e.next();){if("/"==r&&a){t.tokenize=n;break}a="*"==r}return"comment"}function c(e){return function(t,r){for(var a,i=!1,o=!1;null!=(a=t.next());){if(a==e&&!i){o=!0;break}i=!i&&"\\"==a}return!o&&i||(r.tokenize=n),"string"}}function u(){var e=l.concat(m);return new RegExp("[\\[\\]]|("+e.join("|")+")$")}var f=/[\^@!\|<>#~\.\*\-\+\\/,=]/,s=/(<-)|(:=)|(=<)|(>=)|(<=)|(<:)|(>:)|(=:)|(\\=)|(\\=:)|(!!)|(==)|(::)/,d=/(:::)|(\.\.\.)|(=<:)|(>=:)/,l=["in","then","else","of","elseof","elsecase","elseif","catch","finally","with","require","prepare","import","export","define","do"],m=["end"],h=t(["true","false","nil","unit"]),k=t(["andthen","at","attr","declare","feat","from","lex","mod","mode","orelse","parser","prod","prop","scanner","self","syn","token"]),p=t(["local","proc","fun","case","class","if","cond","or","dis","choice","not","thread","try","raise","lock","for","suchthat","meth","functor"]),z=t(l),x=t(m);return{startState:function(){return{tokenize:n,currentIndent:0,doInCurrentLine:!1,hasPassedFirstStage:!1}},token:function(e,t){return e.sol()&&(t.doInCurrentLine=0),t.tokenize(e,t)},indent:function(t,n){var r=n.replace(/^\s+|\s+$/g,"");return r.match(x)||r.match(z)||r.match(/(\[])/)?e.indentUnit*(t.currentIndent-1):t.currentIndent<0?0:t.currentIndent*e.indentUnit},fold:"indent",electricInput:u(),lineComment:"%",blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-oz","oz")});
//# sourceMappingURL=../../sourcemaps/mode/oz/oz.js.map
