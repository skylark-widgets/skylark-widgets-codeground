/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../../Coder"],function(e){"use strict";e.defineMode("smarty",function(t,r){function n(e,t){return s=t,e}function i(e,t,r){return t.tokenize=r,r(e,t)}function a(e,t){return null==t&&(t=e.pos),3===c&&"{"==p&&(t==e.string.length||/\s/.test(e.string.charAt(t)))}function o(e,t){for(var r=e.string,n=e.pos;;){var o=r.indexOf(p,n);if(n=o+p.length,o==-1||!a(e,o+p.length))break}if(o==e.pos)return e.match(p),e.eat("*")?i(e,t,f("comment","*"+d)):(t.depth++,t.tokenize=u,s="startTag","tag");o>-1&&(e.string=r.slice(0,o));var l=h.token(e,t.base);return o>-1&&(e.string=r),l}function u(e,t){if(e.match(d,!0))return 3===c?(t.depth--,t.depth<=0&&(t.tokenize=o)):t.tokenize=o,n("tag",null);if(e.match(p,!0))return t.depth++,n("tag","startTag");var r=e.next();if("$"==r)return e.eatWhile(g.validIdentifier),n("variable-2","variable");if("|"==r)return n("operator","pipe");if("."==r)return n("operator","property");if(g.stringChar.test(r))return t.tokenize=l(r),n("string","string");if(g.operatorChars.test(r))return e.eatWhile(g.operatorChars),n("operator","operator");if("["==r||"]"==r)return n("bracket","bracket");if("("==r||")"==r)return n("bracket","operator");if(/\d/.test(r))return e.eatWhile(/\d/),n("number","number");if("variable"==t.last){if("@"==r)return e.eatWhile(g.validIdentifier),n("property","property");if("|"==r)return e.eatWhile(g.validIdentifier),n("qualifier","modifier")}else{if("pipe"==t.last)return e.eatWhile(g.validIdentifier),n("qualifier","modifier");if("whitespace"==t.last)return e.eatWhile(g.validIdentifier),n("attribute","modifier")}if("property"==t.last)return e.eatWhile(g.validIdentifier),n("property",null);if(/\s/.test(r))return s="whitespace",null;var i="";"/"!=r&&(i+=r);for(var a=null;a=e.eat(g.validIdentifier);)i+=a;for(var u=0,f=k.length;u<f;u++)if(k[u]==i)return n("keyword","keyword");return/\s/.test(r)?null:n("tag","tag")}function l(e){return function(t,r){for(var n=null,i=null;!t.eol();){if(i=t.peek(),t.next()==e&&"\\"!==n){r.tokenize=u;break}n=i}return"string"}}function f(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=o;break}r.next()}return e}}var s,d=r.rightDelimiter||"}",p=r.leftDelimiter||"{",c=r.version||2,h=e.getMode(t,r.baseMode||"null"),k=["debug","extends","function","include","literal"],g={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};return{startState:function(){return{base:e.startState(h),tokenize:o,last:null,depth:0}},copyState:function(t){return{base:e.copyState(h,t.base),tokenize:t.tokenize,last:t.last,depth:t.depth}},innerMode:function(e){if(e.tokenize==o)return{mode:h,state:e.base}},token:function(e,t){var r=t.tokenize(e,t);return t.last=s,r},indent:function(t,r){return t.tokenize==o&&h.indent?h.indent(t.base,r):e.Pass},blockCommentStart:p+"*",blockCommentEnd:"*"+d}}),e.defineMIME("text/x-smarty","smarty")});
//# sourceMappingURL=../../sourcemaps/mode/smarty/smarty.js.map
