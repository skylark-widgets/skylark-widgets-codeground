/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../util/dom","../CoderCtor"],function(t){var i=klass({_construct:function(t,i,e){this.cm=e;var r=this.vert=dom.elt("div",[dom.elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=dom.elt("div",[dom.elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(r),t(l),on(r,"scroll",function(){r.clientHeight&&i(r.scrollTop,"vertical")}),on(l,"scroll",function(){l.clientWidth&&i(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ie&&ie_version<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")},update:function(t){var i=t.scrollWidth>t.clientWidth+1,e=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(e){this.vert.style.display="block",this.vert.style.bottom=i?r+"px":"0";var l=t.viewHeight-(i?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+l)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(i){this.horiz.style.display="block",this.horiz.style.right=e?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var s=t.viewWidth-t.barLeft-(e?r:0);this.horiz.firstChild.style.width=t.scrollWidth-t.clientWidth+s+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:e?r:0,bottom:i?r:0}},setScrollLeft:function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var t=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Delayed,this.disableVert=new Delayed},enableZeroWidthBar:function(t,i){function e(){var r=t.getBoundingClientRect(),l=document.elementFromPoint(r.left+1,r.bottom-1);l!=t?t.style.pointerEvents="none":i.set(1e3,e)}t.style.pointerEvents="auto",i.set(1e3,e)},clear:function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)}}),e=klass({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}});CodeMirror.scrollbarModel={"native":i,"null":e},t.partial({measureForScrollbars:function(){var t=this,i=t.display,e=i.gutters.offsetWidth,r=Math.round(t.doc.height+paddingVert(t.display));return{clientHeight:i.scroller.clientHeight,viewHeight:i.wrapper.clientHeight,scrollWidth:i.scroller.scrollWidth,clientWidth:i.scroller.clientWidth,viewWidth:i.wrapper.clientWidth,barLeft:t.options.fixedGutter?e:0,docHeight:r,scrollHeight:r+scrollGap(t)+i.barHeight,nativeBarWidth:i.nativeBarWidth,gutterWidth:e}},initScrollbars:function(){var t=this;t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&rmClass(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new CodeMirror.scrollbarModel[t.options.scrollbarStyle](function(i){t.display.wrapper.insertBefore(i,t.display.scrollbarFiller),event.on(i,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),i.setAttribute("cm-not-content","true")},function(i,e){"horizontal"==e?t.setScrollLeft(i):t.setScrollTop(i)},t),t.display.scrollbars.addClass&&dom.addClass(t.display.wrapper,t.display.scrollbars.addClass)},updateScrollbars:function(t){var i=this;t||(t=i.measureForScrollbars());var e=i.display.barWidth,r=i.display.barHeight;i.updateScrollbarsInner(t);for(var l=0;l<4&&e!=i.display.barWidth||r!=i.display.barHeight;l++)e!=i.display.barWidth&&i.options.lineWrapping&&i.updateHeightsInViewport(),i.updateScrollbarsInner(i.measureForScrollbars()),e=i.display.barWidth,s,tartHeight=i.display.barHeight},updateScrollbarsInner:function(t){var i=this,e=i.display,r=e.scrollbars.update(t);e.sizer.style.paddingRight=(e.barWidth=r.right)+"px",e.sizer.style.paddingBottom=(e.barHeight=r.bottom)+"px",e.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=r.bottom+"px",e.scrollbarFiller.style.width=r.right+"px"):e.scrollbarFiller.style.display="",r.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=r.bottom+"px",e.gutterFiller.style.width=t.gutterWidth+"px"):e.gutterFiller.style.display=""}})});
//# sourceMappingURL=../../sourcemaps/primitives/display/scrollbars.js.map
