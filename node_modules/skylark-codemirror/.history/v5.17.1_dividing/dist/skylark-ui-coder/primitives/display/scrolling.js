/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../CoderCtor"],function(l){l.partial({maybeScrollWindow:function(l){var o=this;if(!o.signalDOMEvent("scrollCursorIntoView")){var r=o.display,t=r.sizer.getBoundingClientRect(),s=null;if(l.top+t.top<0?s=!0:l.bottom+t.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!phantom){var c=elt("div","â€‹",null,"position: absolute; top: "+(l.top-r.viewOffset-paddingTop(o.display))+"px; height: "+(l.bottom-l.top+scrollGap(o)+r.barHeight)+"px; left: "+l.left+"px; width: 2px;");o.display.lineSpace.appendChild(c),c.scrollIntoView(s),o.display.lineSpace.removeChild(c)}}},scrollPosIntoView:function(l,o,r){var t=this;null==r&&(r=0);for(var s=0;s<5;s++){var c=!1,e=cursorCoords(t,l),i=o&&o!=l?cursorCoords(t,o):e,n=t.calculateScrollPos(Math.min(e.left,i.left),Math.min(e.top,i.top)-r,Math.max(e.left,i.left),Math.max(e.bottom,i.bottom)+r),a=t.doc.scrollTop,p=t.doc.scrollLeft;if(null!=n.scrollTop&&(setScrollTop(t,n.scrollTop),Math.abs(t.doc.scrollTop-a)>1&&(c=!0)),null!=n.scrollLeft&&(setScrollLeft(t,n.scrollLeft),Math.abs(t.doc.scrollLeft-p)>1&&(c=!0)),!c)break}return e},scrollIntoView:function(l,o,r,t){var s=this,c=s.calculateScrollPos(l,o,r,t);null!=c.scrollTop&&setScrollTop(s,c.scrollTop),null!=c.scrollLeft&&setScrollLeft(s,c.scrollLeft)},calculateScrollPos:function(l,o,r,t){var s=this,c=s.display,e=textHeight(s.display);o<0&&(o=0);var i=s.curOp&&null!=s.curOp.scrollTop?s.curOp.scrollTop:c.scroller.scrollTop,n=displayHeight(s),a={};t-o>n&&(t=o+n);var p=s.doc.height+paddingVert(c),u=o<e,f=t>p-e;if(o<i)a.scrollTop=u?0:o;else if(t>i+n){var d=Math.min(o,(f?p:t)-n);d!=i&&(a.scrollTop=d)}var h=s.curOp&&null!=s.curOp.scrollLeft?s.curOp.scrollLeft:c.scroller.scrollLeft,m=s.displayWidth()-(s.options.fixedGutter?c.gutters.offsetWidth:0),T=r-l>m;return T&&(r=l+m),l<10?a.scrollLeft=0:l<h?a.scrollLeft=Math.max(0,l-(T?0:10)):r>m+h-3&&(a.scrollLeft=r+(T?0:10)-m),a},addToScrollPos:function(l,o){var r=this;null==l&&null==o||r.resolveScrollToPos(),null!=l&&(r.curOp.scrollLeft=(null==r.curOp.scrollLeft?r.doc.scrollLeft:r.curOp.scrollLeft)+l),null!=o&&(r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+o)},ensureCursorVisible:function(){var l=this;l.resolveScrollToPos();var o=l.getCursor(),r=o,t=o;l.options.lineWrapping||(r=o.ch?Pos(o.line,o.ch-1):o,t=Pos(o.line,o.ch+1)),l.curOp.scrollToPos={from:r,to:t,margin:l.options.cursorScrollMargin,isCursor:!0}},resolveScrollToPos:function(){var l=this,o=l.curOp.scrollToPos;if(o){l.curOp.scrollToPos=null;var r=l.estimateCoords(o.from),t=l.estimateCoords(o.to),s=l.calculateScrollPos(Math.min(r.left,t.left),Math.min(r.top,t.top)-o.margin,Math.max(r.right,t.right),Math.max(r.bottom,t.bottom)+o.margin);l.scrollTo(s.scrollLeft,s.scrollTop)}}})});
//# sourceMappingURL=../../sourcemaps/primitives/display/scrolling.js.map
