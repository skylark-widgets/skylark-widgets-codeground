/**
 * skylark-ui-coder - The skylark coder widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-coder/
 * @license MIT
 */
define(["../CoderCtor"],function(e){var t=new Delayed,n=null;e.partial({doHandleBinding:function(e,t){var n=this;if("string"==typeof e&&(e=commands[e],!e))return!1;n.display.input.ensurePolled();var i=n.display.shift,r=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),t&&(n.display.shift=!1),r=e(n)!=Pass}finally{n.display.shift=i,n.state.suppressEdits=!1}return r},lookupKeyForEditor:function(e,t){for(var n=this,i=0;i<n.state.keyMaps.length;i++){var r=lookupKey(e,n.state.keyMaps[i],t,n);if(r)return r}return n.options.extraKeys&&lookupKey(e,n.options.extraKeys,t,n)||lookupKey(e,n.options.keyMap,t,n)},dispatchKey:function(e,n,i){var r=this,s=r.state.keySeq;if(s){if(isModifierKey(e))return"handled";t.set(50,function(){r.state.keySeq==s&&(r.state.keySeq=null,r.display.input.reset())}),e=s+" "+e}var a=r.lookupKeyForEditor(e,i);return"multi"==a&&(r.state.keySeq=e),"handled"==a&&r.signalLater("keyHandled",r,e,n),"handled"!=a&&"multi"!=a||(e_preventDefault(n),r.restartBlink()),s&&!a&&/\'$/.test(e)?(e_preventDefault(n),!0):!!a},handleKeyBinding:function(e){var t=this,n=keyName(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?t.dispatchKey("Shift-"+n,e,function(e){return t.doHandleBinding(e,!0)})||t.dispatchKey(n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return t.doHandleBinding(e)}):t.dispatchKey(n,e,function(e){return t.doHandleBinding(e)}))},handleCharBinding:function(e,t){var n=this;return n.dispatchKey("'"+t+"'",e,function(e){return n.doHandleBinding(e,!0)})},onKeyDown:function(e){var t=this;if(t.curOp.focus=activeElt(),!t.signalDOMEvent(e)){ie&&ie_version<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=t.handleKeyBinding(e);presto&&(n=r?i:null,!r&&88==i&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||t.showCrossHair()}},showCrossHair:function(){function e(t){18!=t.keyCode&&t.altKey||(rmClass(n,"CodeMirror-crosshair"),off(document,"keyup",e),off(document,"mouseover",e))}var t=this,n=t.display.lineDiv;addClass(n,"CodeMirror-crosshair"),on(document,"keyup",e),on(document,"mouseover",e)},onKeyUp:function(e){16==e.keyCode&&(this.doc.sel.shift=!1),signalDOMEvent(this,e)},onKeyPress:function(e){var t=this;if(!(eventInWidget(t.display,e)||t.signalDOMEvent(e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(presto&&i==n)return n=null,void e_preventDefault(e);if(!presto||e.which&&!(e.which<10)||!t.handleKeyBinding(e)){var s=String.fromCharCode(null==r?i:r);t.handleCharBinding(e,s)||t.display.input.onKeyPress(e)}}}})});
//# sourceMappingURL=../../sourcemaps/primitives/edit/key_events.js.map
