{"version":3,"sources":["addon/runmode/colorize.js"],"names":["define","CodeMirror","textContent","node","out","nodeType","push","nodeValue","ch","firstChild","nextSibling","isBlock","test","colorize","collection","defaultMode","document","body","getElementsByTagName","i","length","mode","getAttribute","text","innerHTML","runMode","join","className"],"mappings":";;;;;;;AAGAA,QAAQ,cAAe,aAAa,SAASC,GAC3C,YAIA,SAASC,GAAYC,EAAMC,GACzB,GAAqB,GAAjBD,EAAKE,SAAe,MAAOD,GAAIE,KAAKH,EAAKI,UAC7C,KAAK,GAAIC,GAAKL,EAAKM,WAAYD,EAAIA,EAAKA,EAAGE,YACzCR,EAAYM,EAAIJ,GACZO,EAAQC,KAAKT,EAAKE,WAAWD,EAAIE,KAAK,MAN9C,GAAIK,GAAU,qCAUdV,GAAWY,SAAW,SAASC,EAAYC,GACpCD,IAAYA,EAAaE,SAASC,KAAKC,qBAAqB,OAEjE,KAAK,GAAIC,GAAI,EAAGA,EAAIL,EAAWM,SAAUD,EAAG,CAC1C,GAAIhB,GAAOW,EAAWK,GAClBE,EAAOlB,EAAKmB,aAAa,cAAgBP,CAC7C,IAAKM,EAAL,CAEA,GAAIE,KACJrB,GAAYC,EAAMoB,GAClBpB,EAAKqB,UAAY,GACjBvB,EAAWwB,QAAQF,EAAKG,KAAK,IAAKL,EAAMlB,GAExCA,EAAKwB,WAAa","file":"../../../addon/runmode/colorize.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\ndefine([\"../../Coder\", \"./runmode\"],function(CodeMirror) {\n  \"use strict\";\n\n  var isBlock = /^(p|li|div|h\\\\d|pre|blockquote|td)$/;\n\n  function textContent(node, out) {\n    if (node.nodeType == 3) return out.push(node.nodeValue);\n    for (var ch = node.firstChild; ch; ch = ch.nextSibling) {\n      textContent(ch, out);\n      if (isBlock.test(node.nodeType)) out.push(\"\\n\");\n    }\n  }\n\n  CodeMirror.colorize = function(collection, defaultMode) {\n    if (!collection) collection = document.body.getElementsByTagName(\"pre\");\n\n    for (var i = 0; i < collection.length; ++i) {\n      var node = collection[i];\n      var mode = node.getAttribute(\"data-lang\") || defaultMode;\n      if (!mode) continue;\n\n      var text = [];\n      textContent(node, text);\n      node.innerHTML = \"\";\n      CodeMirror.runMode(text.join(\"\"), mode, node);\n\n      node.className += \" cm-s-default\";\n    }\n  };\n});\n"]}