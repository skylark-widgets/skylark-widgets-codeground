{"version":3,"sources":["addon/scroll/scrollpastend.js"],"names":["define","CodeMirror","onChange","cm","change","changeEnd","line","lastLine","updateBottomMargin","padding","lineCount","totalH","display","scroller","clientHeight","lastLineH","getLineHandle","height","state","scrollPastEndPadding","lineSpace","parentNode","style","paddingBottom","off","setSize","on","defineOption","val","old","Init"],"mappings":";;;;;;;AAGAA,QAAQ,eAAgB,SAASC,GAC/B,YAgBA,SAASC,GAASC,EAAIC,GAChBH,EAAWI,UAAUD,GAAQE,MAAQH,EAAGI,YAC1CC,EAAmBL,GAGvB,QAASK,GAAmBL,GAC1B,GAAIM,GAAU,EACd,IAAIN,EAAGO,YAAc,EAAG,CACtB,GAAIC,GAASR,EAAGS,QAAQC,SAASC,aAAe,GAC5CC,EAAYZ,EAAGa,cAAcb,EAAGI,YAAYU,MAChDR,GAAWE,EAASI,EAAa,KAE/BZ,EAAGe,MAAMC,sBAAwBV,IACnCN,EAAGe,MAAMC,qBAAuBV,EAChCN,EAAGS,QAAQQ,UAAUC,WAAWC,MAAMC,cAAgBd,EACtDN,EAAGqB,IAAI,UAAWhB,GAClBL,EAAGsB,UACHtB,EAAGuB,GAAG,UAAWlB,IA/BrBP,EAAW0B,aAAa,iBAAiB,EAAO,SAASxB,EAAIyB,EAAKC,GAC5DA,GAAOA,GAAO5B,EAAW6B,OAC3B3B,EAAGqB,IAAI,SAAUtB,GACjBC,EAAGqB,IAAI,UAAWhB,GAClBL,EAAGS,QAAQQ,UAAUC,WAAWC,MAAMC,cAAgB,GACtDpB,EAAGe,MAAMC,qBAAuB,MAE9BS,IACFzB,EAAGuB,GAAG,SAAUxB,GAChBC,EAAGuB,GAAG,UAAWlB,GACjBA,EAAmBL","file":"../../../addon/scroll/scrollpastend.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\ndefine([\"../../Coder\"], function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"scrollPastEnd\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"change\", onChange);\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.display.lineSpace.parentNode.style.paddingBottom = \"\";\n      cm.state.scrollPastEndPadding = null;\n    }\n    if (val) {\n      cm.on(\"change\", onChange);\n      cm.on(\"refresh\", updateBottomMargin);\n      updateBottomMargin(cm);\n    }\n  });\n\n  function onChange(cm, change) {\n    if (CodeMirror.changeEnd(change).line == cm.lastLine())\n      updateBottomMargin(cm);\n  }\n\n  function updateBottomMargin(cm) {\n    var padding = \"\";\n    if (cm.lineCount() > 1) {\n      var totalH = cm.display.scroller.clientHeight - 30,\n          lastLineH = cm.getLineHandle(cm.lastLine()).height;\n      padding = (totalH - lastLineH) + \"px\";\n    }\n    if (cm.state.scrollPastEndPadding != padding) {\n      cm.state.scrollPastEndPadding = padding;\n      cm.display.lineSpace.parentNode.style.paddingBottom = padding;\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.setSize();\n      cm.on(\"refresh\", updateBottomMargin);\n    }\n  }\n});\n"]}