{"version":3,"sources":["mode/ntriples/ntriples.js"],"names":["define","CodeMirror","defineMode","transitState","currState","c","ret","currLocation","location","Location","PRE_SUBJECT","WRITING_SUB_URI","WRITING_BNODE_URI","PRE_PRED","WRITING_PRED_URI","PRE_OBJ","WRITING_OBJ_URI","WRITING_OBJ_BNODE","WRITING_OBJ_LITERAL","POST_OBJ","WRITING_LIT_LANG","WRITING_LIT_TYPE","ERROR","startState","uris","anchors","bnodes","langs","types","token","stream","state","ch","next","parsedURI","eatWhile","push","match","parsedAnchor","parsedBNode","peek","parsedLang","parsedType","defineMIME"],"mappings":"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","file":"../../../mode/ntriples/ntriples.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/**********************************************************\n* This script provides syntax highlighting support for\n* the Ntriples format.\n* Ntriples format specification:\n*     http://www.w3.org/TR/rdf-testcases/#ntriples\n***********************************************************/\n\n/*\n    The following expression defines the defined ASF grammar transitions.\n\n    pre_subject ->\n        {\n        ( writing_subject_uri | writing_bnode_uri )\n            -> pre_predicate\n                -> writing_predicate_uri\n                    -> pre_object\n                        -> writing_object_uri | writing_object_bnode |\n                          (\n                            writing_object_literal\n                                -> writing_literal_lang | writing_literal_type\n                          )\n                            -> post_object\n                                -> BEGIN\n         } otherwise {\n             -> ERROR\n         }\n*/\n\ndefine([\"../../Coder\"], function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"ntriples\", function() {\n\n  var Location = {\n    PRE_SUBJECT         : 0,\n    WRITING_SUB_URI     : 1,\n    WRITING_BNODE_URI   : 2,\n    PRE_PRED            : 3,\n    WRITING_PRED_URI    : 4,\n    PRE_OBJ             : 5,\n    WRITING_OBJ_URI     : 6,\n    WRITING_OBJ_BNODE   : 7,\n    WRITING_OBJ_LITERAL : 8,\n    WRITING_LIT_LANG    : 9,\n    WRITING_LIT_TYPE    : 10,\n    POST_OBJ            : 11,\n    ERROR               : 12\n  };\n  function transitState(currState, c) {\n    var currLocation = currState.location;\n    var ret;\n\n    // Opening.\n    if     (currLocation == Location.PRE_SUBJECT && c == '<') ret = Location.WRITING_SUB_URI;\n    else if(currLocation == Location.PRE_SUBJECT && c == '_') ret = Location.WRITING_BNODE_URI;\n    else if(currLocation == Location.PRE_PRED    && c == '<') ret = Location.WRITING_PRED_URI;\n    else if(currLocation == Location.PRE_OBJ     && c == '<') ret = Location.WRITING_OBJ_URI;\n    else if(currLocation == Location.PRE_OBJ     && c == '_') ret = Location.WRITING_OBJ_BNODE;\n    else if(currLocation == Location.PRE_OBJ     && c == '\"') ret = Location.WRITING_OBJ_LITERAL;\n\n    // Closing.\n    else if(currLocation == Location.WRITING_SUB_URI     && c == '>') ret = Location.PRE_PRED;\n    else if(currLocation == Location.WRITING_BNODE_URI   && c == ' ') ret = Location.PRE_PRED;\n    else if(currLocation == Location.WRITING_PRED_URI    && c == '>') ret = Location.PRE_OBJ;\n    else if(currLocation == Location.WRITING_OBJ_URI     && c == '>') ret = Location.POST_OBJ;\n    else if(currLocation == Location.WRITING_OBJ_BNODE   && c == ' ') ret = Location.POST_OBJ;\n    else if(currLocation == Location.WRITING_OBJ_LITERAL && c == '\"') ret = Location.POST_OBJ;\n    else if(currLocation == Location.WRITING_LIT_LANG && c == ' ') ret = Location.POST_OBJ;\n    else if(currLocation == Location.WRITING_LIT_TYPE && c == '>') ret = Location.POST_OBJ;\n\n    // Closing typed and language literal.\n    else if(currLocation == Location.WRITING_OBJ_LITERAL && c == '@') ret = Location.WRITING_LIT_LANG;\n    else if(currLocation == Location.WRITING_OBJ_LITERAL && c == '^') ret = Location.WRITING_LIT_TYPE;\n\n    // Spaces.\n    else if( c == ' ' &&\n             (\n               currLocation == Location.PRE_SUBJECT ||\n               currLocation == Location.PRE_PRED    ||\n               currLocation == Location.PRE_OBJ     ||\n               currLocation == Location.POST_OBJ\n             )\n           ) ret = currLocation;\n\n    // Reset.\n    else if(currLocation == Location.POST_OBJ && c == '.') ret = Location.PRE_SUBJECT;\n\n    // Error\n    else ret = Location.ERROR;\n\n    currState.location=ret;\n  }\n\n  return {\n    startState: function() {\n       return {\n           location : Location.PRE_SUBJECT,\n           uris     : [],\n           anchors  : [],\n           bnodes   : [],\n           langs    : [],\n           types    : []\n       };\n    },\n    token: function(stream, state) {\n      var ch = stream.next();\n      if(ch == '<') {\n         transitState(state, ch);\n         var parsedURI = '';\n         stream.eatWhile( function(c) { if( c != '#' && c != '>' ) { parsedURI += c; return true; } return false;} );\n         state.uris.push(parsedURI);\n         if( stream.match('#', false) ) return 'variable';\n         stream.next();\n         transitState(state, '>');\n         return 'variable';\n      }\n      if(ch == '#') {\n        var parsedAnchor = '';\n        stream.eatWhile(function(c) { if(c != '>' && c != ' ') { parsedAnchor+= c; return true; } return false;});\n        state.anchors.push(parsedAnchor);\n        return 'variable-2';\n      }\n      if(ch == '>') {\n          transitState(state, '>');\n          return 'variable';\n      }\n      if(ch == '_') {\n          transitState(state, ch);\n          var parsedBNode = '';\n          stream.eatWhile(function(c) { if( c != ' ' ) { parsedBNode += c; return true; } return false;});\n          state.bnodes.push(parsedBNode);\n          stream.next();\n          transitState(state, ' ');\n          return 'builtin';\n      }\n      if(ch == '\"') {\n          transitState(state, ch);\n          stream.eatWhile( function(c) { return c != '\"'; } );\n          stream.next();\n          if( stream.peek() != '@' && stream.peek() != '^' ) {\n              transitState(state, '\"');\n          }\n          return 'string';\n      }\n      if( ch == '@' ) {\n          transitState(state, '@');\n          var parsedLang = '';\n          stream.eatWhile(function(c) { if( c != ' ' ) { parsedLang += c; return true; } return false;});\n          state.langs.push(parsedLang);\n          stream.next();\n          transitState(state, ' ');\n          return 'string-2';\n      }\n      if( ch == '^' ) {\n          stream.next();\n          transitState(state, '^');\n          var parsedType = '';\n          stream.eatWhile(function(c) { if( c != '>' ) { parsedType += c; return true; } return false;} );\n          state.types.push(parsedType);\n          stream.next();\n          transitState(state, '>');\n          return 'variable';\n      }\n      if( ch == ' ' ) {\n          transitState(state, ch);\n      }\n      if( ch == '.' ) {\n          transitState(state, ch);\n      }\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/n-triples\", \"ntriples\");\n\n});\n"]}