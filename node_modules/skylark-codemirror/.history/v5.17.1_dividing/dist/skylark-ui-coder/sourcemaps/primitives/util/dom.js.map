{"version":3,"sources":["primitives/util/dom.js"],"names":["define","elt","tag","content","className","style","e","document","createElement","cssText","appendChild","createTextNode","i","length","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","contains","child","nodeType","parentNode","host","activeElt","activeElement","root","classTest","cls","RegExp","rmClass","node","current","match","exec","after","slice","index","addClass","test","joinClasses","a","b","as","split","range","createRange","start","end","endNode","r","setEnd","setStart","body","createTextRange","moveToElementText","collapse","moveEnd","moveStart","ie","ie_version"],"mappings":";;;;;;;AAAAA,UAAU,WAER,QAASC,GAAIC,EAAKC,EAASC,EAAWC,GACpC,GAAIC,GAAIC,SAASC,cAAcN,EAG/B,IAFIE,IAAWE,EAAEF,UAAYA,GACzBC,IAAOC,EAAED,MAAMI,QAAUJ,GACP,gBAAXF,GAAqBG,EAAEI,YAAYH,SAASI,eAAeR,QACjE,IAAIA,EAAS,IAAK,GAAIS,GAAI,EAAGA,EAAIT,EAAQU,SAAUD,EAAGN,EAAEI,YAAYP,EAAQS,GACjF,OAAON,GA0BT,QAASQ,GAAeR,GACtB,IAAK,GAAIS,GAAQT,EAAEU,WAAWH,OAAQE,EAAQ,IAAKA,EACjDT,EAAEW,YAAYX,EAAEY,WAClB,OAAOZ,GAGT,QAASa,GAAqBC,EAAQd,GACpC,MAAOQ,GAAeM,GAAQV,YAAYJ,GAG5C,QAASe,GAASD,EAAQE,GAGxB,GAFsB,GAAlBA,EAAMC,WACRD,EAAQA,EAAME,YACZJ,EAAOC,SACT,MAAOD,GAAOC,SAASC,EACzB,GAEE,IADsB,IAAlBA,EAAMC,WAAgBD,EAAQA,EAAMG,MACpCH,GAASF,EAAQ,OAAO,QACrBE,EAAQA,EAAME,YAGzB,QAASE,KAEP,IADA,GAAIC,GAAgBpB,SAASoB,cACtBA,GAAiBA,EAAcC,MAAQD,EAAcC,KAAKD,eAC/DA,EAAgBA,EAAcC,KAAKD,aACrC,OAAOA,GAYT,QAASE,GAAUC,GACjB,MAAO,IAAIC,QAAO,UAAYD,EAAM,iBAGtC,QAASE,GAAQC,EAAMH,GACrB,GAAII,GAAUD,EAAK7B,UACf+B,EAAQN,EAAUC,GAAKM,KAAKF,EAChC,IAAIC,EAAO,CACT,GAAIE,GAAQH,EAAQI,MAAMH,EAAMI,MAAQJ,EAAM,GAAGtB,OACjDoB,GAAK7B,UAAY8B,EAAQI,MAAM,EAAGH,EAAMI,QAAUF,EAAQF,EAAM,GAAKE,EAAQ,KAIjF,QAASG,GAAUP,EAAMH,GACvB,GAAII,GAAUD,EAAK7B,SACdyB,GAAUC,GAAKW,KAAKP,KAAUD,EAAK7B,YAAc8B,EAAU,IAAM,IAAMJ,GAG9E,QAASY,GAAYC,EAAGC,GAEtB,IAAK,GADDC,GAAKF,EAAEG,MAAM,KACRlC,EAAI,EAAGA,EAAIiC,EAAGhC,OAAQD,IACzBiC,EAAGjC,KAAOiB,EAAUgB,EAAGjC,IAAI6B,KAAKG,KAAIA,GAAK,IAAMC,EAAGjC,GACxD,OAAOgC,GAlFT,GAAIG,EAqFJ,OAnFEA,GADExC,SAASyC,YACH,SAASf,EAAMgB,EAAOC,EAAKC,GACjC,GAAIC,GAAI7C,SAASyC,aAGjB,OAFAI,GAAEC,OAAOF,GAAWlB,EAAMiB,GAC1BE,EAAEE,SAASrB,EAAMgB,GACVG,GAGD,SAASnB,EAAMgB,EAAOC,GAC5B,GAAIE,GAAI7C,SAASgD,KAAKC,iBACtB,KACEJ,EAAEK,kBAAkBxB,EAAKT,YAC3B,MAAMlB,GACJ,MAAO8C,GAKT,MAHAA,GAAEM,UAAS,GACXN,EAAEO,QAAQ,YAAaT,GACvBE,EAAEQ,UAAU,YAAaX,GAClBG,GAkCPS,IAAMC,WAAa,KAAIpC,EAAY,WACrC,IAAM,MAAOnB,UAASoB,cACtB,MAAMrB,GACJ,MAAOC,UAASgD,SA8BlBtD,IAAMA,EACN8C,MAAQA,EACRjC,eAAiBA,EACjBK,qBAAuBA,EACvBE,SAAWA,EACXK,UAAYA,EACZM,QAAUA,EACVQ,SAAWA,EACXE,YAAcA","file":"../../../primitives/util/dom.js","sourcesContent":["define([],function(){\r\n  // DOM UTILITIES\r\n  function elt(tag, content, className, style) {\r\n    var e = document.createElement(tag);\r\n    if (className) e.className = className;\r\n    if (style) e.style.cssText = style;\r\n    if (typeof content == \"string\") e.appendChild(document.createTextNode(content));\r\n    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);\r\n    return e;\r\n  }\r\n\r\n  var range;\r\n  if (document.createRange) {\r\n    range = function(node, start, end, endNode) {\r\n      var r = document.createRange();\r\n      r.setEnd(endNode || node, end);\r\n      r.setStart(node, start);\r\n      return r;\r\n    };\r\n  } else {\r\n    range = function(node, start, end) {\r\n      var r = document.body.createTextRange();\r\n      try { \r\n        r.moveToElementText(node.parentNode); }\r\n      catch(e) { \r\n        return r; \r\n      }\r\n      r.collapse(true);\r\n      r.moveEnd(\"character\", end);\r\n      r.moveStart(\"character\", start);\r\n      return r;\r\n    };\r\n  }\r\n\r\n  function removeChildren(e) {\r\n    for (var count = e.childNodes.length; count > 0; --count)\r\n      e.removeChild(e.firstChild);\r\n    return e;\r\n  }\r\n\r\n  function removeChildrenAndAdd(parent, e) {\r\n    return removeChildren(parent).appendChild(e);\r\n  }\r\n\r\n  function contains(parent, child) {\r\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\r\n      child = child.parentNode;\r\n    if (parent.contains)\r\n      return parent.contains(child);\r\n    do {\r\n      if (child.nodeType == 11) child = child.host;\r\n      if (child == parent) return true;\r\n    } while (child = child.parentNode);\r\n  };\r\n\r\n  function activeElt() {\r\n    var activeElement = document.activeElement;\r\n    while (activeElement && activeElement.root && activeElement.root.activeElement)\r\n      activeElement = activeElement.root.activeElement;\r\n    return activeElement;\r\n  }\r\n\r\n  // Older versions of IE throws unspecified error when touching\r\n  // document.activeElement in some cases (during loading, in iframe)\r\n  if (ie && ie_version < 11) activeElt = function() {\r\n    try { return document.activeElement; }\r\n    catch(e) { \r\n      return document.body; \r\n    }\r\n  };\r\n\r\n  function classTest(cls) { \r\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\"); \r\n  }\r\n  \r\n  function rmClass(node, cls) {\r\n    var current = node.className;\r\n    var match = classTest(cls).exec(current);\r\n    if (match) {\r\n      var after = current.slice(match.index + match[0].length);\r\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\r\n    }\r\n  };\r\n  \r\n  function addClass (node, cls) {\r\n    var current = node.className;\r\n    if (!classTest(cls).test(current)) node.className += (current ? \" \" : \"\") + cls;\r\n  };\r\n\r\n  function joinClasses(a, b) {\r\n    var as = a.split(\" \");\r\n    for (var i = 0; i < as.length; i++)\r\n      if (as[i] && !classTest(as[i]).test(b)) b += \" \" + as[i];\r\n    return b;\r\n  }\r\n\r\n  return {\r\n    elt : elt,\r\n    range : range,\r\n    removeChildren : removeChildren,\r\n    removeChildrenAndAdd : removeChildrenAndAdd,\r\n    contains : contains,\r\n    activeElt : activeElt,\r\n    rmClass : rmClass,\r\n    addClass : addClass,\r\n    joinClasses : joinClasses\r\n\r\n  };\r\n\r\n});\r\n"]}